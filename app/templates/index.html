{% extends "base.html" %}

{% block content %}
<h1>Loan Calculator</h1>
<form method="post" action="/loan">
    <label>Principal:</label>
    <input name="principal" type="number" step="any" required><br>
    <label>Rate (%):</label>
    <input name="rate" type="number" step="any" required><br>
    <label>Years:</label>
    <input name="years" type="number" step="1" required><br>
    <div style="display: flex; gap: 10px; margin-top: 10px;">
        <input type="submit" value="Calculate Loan">
        <button type="button" id="payment-plan-btn" onclick="openPaymentPlan()" disabled style="background-color: #ccc;">Payment Plan Calculator</button>
    </div>
</form>

<h1>Savings Calculator</h1>
<form method="post" action="/savings">
    <label>Initial Amount:</label>
    <input name="initial" type="number" step="any" required><br>
    <label>Monthly Contribution:</label>
    <input name="monthly" type="number" step="any" required><br>
    <label>Rate (%):</label>
    <input name="rate" type="number" step="any" required><br>
    <label>Compounding Period:</label>
    <select name="compounding_period">
        <option value="yearly">Yearly</option>
        <option value="monthly">Monthly</option>
        <option value="daily">Daily</option>
    </select><br>
    <label>Years:</label>
    <input name="years" type="number" step="1" required><br>
    <input type="submit" value="Calculate Savings">
</form>

<script>
function openPaymentPlan() {
    window.location.href = '/payment-schedule';
}

// Enable payment plan button after loan calculation
document.addEventListener('DOMContentLoaded', function() {
    const paymentPlanBtn = document.getElementById('payment-plan-btn');

    // Check if the loan has been calculated
    if (sessionStorage.getItem('loanCalculated') === 'true') {
        paymentPlanBtn.disabled = false;
        paymentPlanBtn.style.backgroundColor = '#007bff';
        paymentPlanBtn.style.color = 'white';
    }
});
</script>
{% endblock %}